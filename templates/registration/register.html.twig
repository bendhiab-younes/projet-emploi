{% extends 'base.html.twig' %}

{% block title %}Register{% endblock %}

{% block body %}
    <h1>Register</h1>
    <p>Quel type d'utilisateur souhaitez-vous ajouter?</p>

    <select id="userType">
        <option value="">Select an option</option>
        <option value="etudiant">Etudiant</option>
        <option value="enseignant">Enseignant</option>
        <option value="admin">Admin</option>
    </select>

    {{ form_start(registrationForm) }}
        {{ form_row(registrationForm.email) }}
        {{ form_row(registrationForm.plainPassword, { label: 'Password' }) }}
        {{ form_row(registrationForm.nom) }}
        {{ form_row(registrationForm.prenom) }}
        {{ form_row(registrationForm.CIN) }}
        {{ form_row(registrationForm.type) }}

        <div id="classeField" style="display: none;">
            {{ form_row(registrationForm.classe) }}
        </div>

        <div id="matieresField" style="display: none;">
            {{ form_row(registrationForm.matieres) }}
        </div>
        {{ form_row(registrationForm.departement) }}
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#userType').change(function() {
                var selectedType = $(this).val();
                
                if (selectedType === 'etudiant') {
                    $('#classeField').show();
                    $('#matieresField').hide();
                } else if (selectedType === 'enseignant') {
                    $('#classeField').hide();
                    $('#matieresField').show();
                } else {
                    $('#classeField').hide();
                    $('#matieresField').hide();
                }
            });
        });
    </script>
    {{ form_row(registrationForm.agreeTerms) }}
    <br>
    <button type="submit" class="btn">Register</button>
    {{ form_end(registrationForm) }}
{% endblock %}
