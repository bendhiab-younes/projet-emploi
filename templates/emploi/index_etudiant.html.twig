{% extends 'base.html.twig' %}

{% block title %}Hello !{% endblock %}

{% block body %}



<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>
<h4>{{ classe.nomClasse }}</h4>
    {% set semaineFiltered = [] %}
            {% for semaine in semaines %}
                {% set semaineFiltered = semaineFiltered|merge([semaine]) %}
            {% endfor %}
            {% if semaineFiltered|length > 0 %}
                {% set semaineFound = true %}
                {% set semaine = semaineFiltered[0] %}

                <table class="table">
                    <thead>
                        <tr>
                            <td></td>
                            {% for jour in jours %}
                                {% if jour.semaine == semaine %}
                                    <th>{{ jour.nomJour }}</th>
                                {% endif %}
                            {% endfor %}
                        </tr>
                    </thead>
                    <tbody>
                        {% for heur in horaires %}
                            <tr>
                                <th>{% if is_granted('ROLE_ADMIN') or is_granted('ROLE_SUPER_ADMIN') %}<a href="{{ path('app_horaire_show', {'id': heur.id}) }}">{% endif %}{{ heur }}</a></th>
                                {% for jour in jours %}
                                    {% set seanceFound = false %}
                                    {% for seance in seances  %}
                                        {% if seance.jour == jour and seance.jour.semaine == semaine %}
                                            {% set seanceFound = true %}
                                            <td>
                                            {% if is_granted('ROLE_ADMIN') or is_granted('ROLE_SUPER_ADMIN') %}
                                                <a href="{{ path('app_seance_show', {'id': seance.id}) }}">
                                            {% endif %}
                                                    {{ seance.matiere }}<br>
                                                    {{seance.matiere.user.nom}} {{seance.matiere.user.prenom}}<br>
                                                    {% if seance.matiere.tp == true %}
                                                        TP
                                                    {% else %}
                                                        Cours
                                                    {% endif %}
                                                    <br>{{ seance.salle }}
                                                </a>
                                            </td>
                                        {% endif %}
                                    {% endfor %}
                                    {% if not seanceFound %}
                                        <td></td>
                                    {% endif %}
                                {% endfor %}
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% endif %}
{% endblock %}
