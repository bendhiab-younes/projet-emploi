{% extends 'base.html.twig' %}

{% block title %}Hello EmploiController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>
<form method="GET">
    <h5>nom de classe</h5>
    <select name="filter">
        <option value="">none</option>
        {% for classe in classes %}
            <option value="{{ classe.nomClasse }}" {% if app.request.query.get('filter') == classe.nomClasse %}selected{% endif %}>{{ classe.nomClasse }}</option>
        {% endfor %}
    </select>
    <input type="submit" value="Filter">
</form>
{% if app.request.query.get('filter') %}
    {% set filter = app.request.query.get('filter') %}
    {% for classe in classes %}
        {% if classe.nomClasse == filter %}
            <br>
            <h4>{{ classe }}</h4>
            {% for sem in semaines %}
                <table class="table">
                    <thead>
                        <tr>
                            <td></td>
                            {% for jour in jours %}
                                {% if jour.semaine == sem %}
                                    <th>{{ jour.nomJour }}</th>
                                {% endif %}
                            {% endfor %}
                        </tr>
                    </thead>
                    <tbody>
                        {% for heur in horaires %}
                            <tr>
                                <th><a href="{{ path('app_horaire_show', {'id': heur.id}) }}">{{ heur }}</a></th>
                                {% for jour in jours %}
                                    {% for seance in seances %}
                                        {% if seance.horaires == heur and seance.classe == classe %}
                                            {% if seance.jour == jour and seance.jour.semaine == sem %}
                                                <td>
                                                    <a href="{{ path('app_seance_show', {'id': seance.id}) }}">
                                                        {{ seance.matiere }}<br>
                                                        {% if seance.matiere.tp == true %}
                                                            TP
                                                        {% else %}
                                                            Cours
                                                        {% endif %}
                                                        <br>{{ seance.salle }}
                                                    </a>
                                                </td>
                                            {% endif %}
                                        {% endif %}
                                    {% endfor %}
                                {% endfor %}
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% endfor %}
        {% endif %}
    {% endfor %}
{% endif %}
{% endblock %}
